#!/bin/bash
# update-keystore.sh
# å®Ÿéš›ã®Keystoreå†…å®¹ã«æ›´æ–°ã™ã‚‹ã‚¹ã‚¯ãƒªãƒ—ãƒˆ

# å‡ºåŠ›å…ˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®å­˜åœ¨ç¢ºèª
mkdir -p android/app

# å…±æœ‰ã•ã‚ŒãŸbase64ãƒ‡ãƒ¼ã‚¿ã‚’ã‚­ãƒ¼ã‚¹ãƒˆã‚¢ã«ãƒ‡ã‚³ãƒ¼ãƒ‰
echo "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" | base64 --decode > android/app/stilya-keystore.jks

# Keystoreã®ãƒ‘ãƒ¼ãƒŸãƒƒã‚·ãƒ§ãƒ³è¨­å®š
chmod 600 android/app/stilya-keystore.jks

# credentials.jsonã®å†ä½œæˆ
cat > credentials.json << EOL
{
  "android": {
    "keystore": {
      "keystorePath": "android/app/stilya-keystore.jks",
      "keystorePassword": "jpn3025Koki",
      "keyAlias": "stilya-key-alias",
      "keyPassword": "jpn3025Koki"
    }
  }
}
EOL

# GitHubç”¨ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤º
echo "âœ… å®Ÿéš›ã®Keystoreãƒ•ã‚¡ã‚¤ãƒ«ãŒæ­£å¸¸ã«è¨­å®šã•ã‚Œã¾ã—ãŸ"
echo "ğŸ“ credentials.jsonã‚‚æ›´æ–°ã•ã‚Œã¾ã—ãŸ"
echo "ğŸ”’ GitHub Secretsã«ä»¥ä¸‹ã®4ã¤ã®å€¤ã‚’è¨­å®šã—ã¦ãã ã•ã„ï¼š"
echo "   - ANDROID_KEYSTORE_BASE64: base64ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã•ã‚ŒãŸKeystoreãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆã™ã§ã«å…±æœ‰ã•ã‚ŒãŸã‚‚ã®ï¼‰"
echo "   - ANDROID_KEY_ALIAS: stilya-key-alias"
echo "   - ANDROID_KEYSTORE_PASSWORD: jpn3025Koki"
echo "   - ANDROID_KEY_PASSWORD: jpn3025Koki"
