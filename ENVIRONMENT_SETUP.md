# Stilya開発環境セットアップガイド

## エラー「yarn install --frozen-lockfile exited with non-zero code: 1」の解決方法

このエラーは、`yarn.lock`ファイルが`package.json`と整合していない状態で、`--frozen-lockfile`フラグを使用してインストールを実行したために発生しています。このプロジェクトでは、以下の手順でエラーを解決できます。

## 解決方法

### 1. 依存関係の修復スクリプトを使用する

プロジェクトのルートディレクトリで以下のコマンドを実行します：

```bash
# 修復スクリプトを実行
yarn fix-deps

# または
npm run fix-deps
```

このスクリプトは以下の処理を行います：
- 既存の`node_modules`ディレクトリを削除
- `yarn.lock`と`package-lock.json`ファイルを削除
- `yarn install`を実行して依存関係を再インストール

### 2. 手動で依存関係をインストールする

修復スクリプトがうまく機能しない場合は、以下の手順を試してください：

```bash
# yarn.lockファイルを削除
rm yarn.lock

# 依存関係をインストール（--frozen-lockfileフラグなし）
yarn install

# または
npm install
```

## 注意事項

- CI/CD環境では、`--frozen-lockfile`フラグが使用されているため、ローカルで正しい`yarn.lock`ファイルを生成し、それをリポジトリにコミットする必要があります。
- 警告メッセージ（deprecated packages）がいくつか表示されますが、これらはMVP段階では無視しても問題ありません。将来的には依存関係の更新を検討してください。

## アニメーション機能のテスト

React Native Reanimatedが正しく動作しているかを確認するため、アニメーションテスト画面を追加しました。開発環境が正しく設定されているか確認するには：

1. アプリを起動：`yarn start`または`npm run start`
2. デベロッパーメニューを開く
3. 「レコメンド機能テスト」画面に移動
4. 「アニメーションテスト画面」ボタンをタップ
5. 青いボックスに対して「Scale」「Rotate」「Move」ボタンをタップし、アニメーションが滑らかに動作するか確認する

アニメーションが正常に動作すれば、React Native Reanimatedが正しく設定されています。

## その他の注意点

- `.env`ファイルを作成していない場合は、`.env.example`をコピーして必要な環境変数を設定してください。
- このプロジェクトはExpo 53を使用しています。古いバージョンのNode.jsを使用している場合は、Node.js v18以上にアップグレードしてください。
- キャッシュの問題が発生した場合は、以下のコマンドを試してください：
  ```bash
  expo start --clear
  ```

以上の手順でStilya開発環境のセットアップと依存関係の問題を解決できます。不明点があれば、開発チームにお問い合わせください。
