# 拡張MVPブランドリスト (30ブランド)

## 概要
Stilyaの拡張MVP戦略として、20-40代女性のペルソナに合わせた30ブランドを選定しました。段階的な商品数増加とSupabase容量管理機能を実装し、エラーハンドリングも強化しています。

## ブランド一覧

### Priority 1: ベーシック・定番 (最優先)
信頼性が高く、幅広い年齢層に人気のブランド

| ブランド名 | 対象年齢 | 初期商品数 | 最大商品数 | 特徴 |
|-----------|---------|-----------|-----------|------|
| **UNIQLO** | 20-40歳 | 30件 | 100件 | ベーシック、シンプル、機能的 |
| **GU** | 20-30歳 | 30件 | 100件 | トレンド、プチプラ、カジュアル |
| **無印良品** | 25-40歳 | 20件 | 60件 | シンプル、ナチュラル、ベーシック |

### Priority 2: ECブランド・D2C系 (コスパ重視)
オンライン中心で人気の高コスパブランド

| ブランド名 | 対象年齢 | 初期商品数 | 最大商品数 | 特徴 |
|-----------|---------|-----------|-----------|------|
| **coca** | 25-35歳 | 20件 | 60件 | ナチュラル、カジュアル、リラックス |
| **pierrot** | 25-40歳 | 20件 | 60件 | 大人カジュアル、きれいめ、オフィス |
| **Re:EDIT** | 20-35歳 | 20件 | 60件 | トレンド、モード、カジュアル |
| **fifth** | 20-30歳 | 20件 | 60件 | 韓国系、トレンド、プチプラ |
| **titivate** | 25-40歳 | 20件 | 60件 | きれいめ、オフィス、大人カジュアル |

### Priority 3: セレクトショップ系 (品質重視)
上質で洗練されたアイテムを提供

| ブランド名 | 対象年齢 | 初期商品数 | 最大商品数 | 特徴 |
|-----------|---------|-----------|-----------|------|
| **URBAN RESEARCH** | 25-40歳 | 15件 | 50件 | 都会的、セレクト、カジュアル |
| **nano・universe** | 20-35歳 | 15件 | 50件 | トレンド、きれいめ、モード |
| **BEAMS** | 25-40歳 | 15件 | 50件 | カジュアル、セレクト、トレンド |
| **UNITED ARROWS** | 30-40歳 | 15件 | 50件 | きれいめ、上品、オフィス |
| **SHIPS** | 30-40歳 | 15件 | 50件 | トラッド、上品、きれいめ |

### Priority 4: ライフスタイル系
ライフスタイルに寄り添うブランド

| ブランド名 | 対象年齢 | 初期商品数 | 最大商品数 | 特徴 |
|-----------|---------|-----------|-----------|------|
| **studio CLIP** | 25-40歳 | 15件 | 40件 | ナチュラル、雑貨、リラックス |
| **SM2** | 25-40歳 | 15件 | 40件 | ナチュラル、ほっこり、カジュアル |
| **earth music&ecology** | 20-30歳 | 15件 | 40件 | カジュアル、ナチュラル、エコ |
| **LOWRYS FARM** | 20-30歳 | 15件 | 40件 | ガーリー、カジュアル、フェミニン |

### Priority 5: 年齢層別特化ブランド
特定の年齢層に特化した提案

| ブランド名 | 対象年齢 | 初期商品数 | 最大商品数 | 特徴 |
|-----------|---------|-----------|-----------|------|
| **PLST** | 30-40歳 | 10件 | 40件 | 大人ベーシック、きれいめ、上質 |
| **vis** | 25-35歳 | 10件 | 40件 | オフィス、きれいめ、フェミニン |
| **ROPE** | 25-40歳 | 10件 | 40件 | エレガント、きれいめ、オフィス |
| **NATURAL BEAUTY BASIC** | 25-40歳 | 10件 | 40件 | オフィス、きれいめ、ベーシック |

### Priority 6: トレンド・個性派
最新トレンドと個性的なスタイル

| ブランド名 | 対象年齢 | 初期商品数 | 最大商品数 | 特徴 |
|-----------|---------|-----------|-----------|------|
| **ZARA** | 20-35歳 | 10件 | 40件 | 欧州トレンド、モード、ファスト |
| **H&M** | 20-30歳 | 10件 | 40件 | 北欧、トレンド、カジュアル |
| **SNIDEL** | 20-30歳 | 10件 | 40件 | フェミニン、エレガント、トレンド |
| **FRAY I.D** | 25-35歳 | 10件 | 40件 | エレガント、モード、フェミニン |

### Priority 7: カジュアル・ストリート
リラックスしたカジュアルスタイル

| ブランド名 | 対象年齢 | 初期商品数 | 最大商品数 | 特徴 |
|-----------|---------|-----------|-----------|------|
| **WEGO** | 20-25歳 | 10件 | 30件 | ストリート、カジュアル、プチプラ |
| **GLOBAL WORK** | 25-40歳 | 10件 | 30件 | カジュアル、ファミリー、ベーシック |
| **niko and...** | 20-35歳 | 10件 | 30件 | カジュアル、雑貨、ライフスタイル |
| **coen** | 20-35歳 | 10件 | 30件 | カジュアル、アメカジ、ベーシック |

## 実装機能

### 1. 段階的商品数増加システム
- **初回同期**: 各ブランドの `initialProducts` 数で開始
- **7日後**: 商品数を20%増加（最大値まで）
- **履歴管理**: `data/sync-history.json` に同期履歴を保存

### 2. Supabase容量管理
- **警告閾値**: 50,000件
- **危険閾値**: 90,000件
- **自動調整**: 容量に応じて古い商品を無効化

### 3. エラーハンドリング
- **API レート制限対策**: 自動リトライとウェイト時間
- **バッチ処理**: 大量データの分割処理
- **タイムアウト設定**: 各API呼び出しに10秒のタイムアウト

### 4. カテゴリ別管理
7つのカテゴリで体系的に管理：
- `basic`: ベーシック・定番
- `ec-brand`: ECブランド・D2C
- `select`: セレクトショップ
- `lifestyle`: ライフスタイル
- `age-specific`: 年齢層特化
- `trend`: トレンド・個性派
- `casual`: カジュアル

## 同期統計（初回実行時の予測）

| カテゴリ | ブランド数 | 初期商品数 | 最大商品数 |
|---------|-----------|-----------|-----------|
| ベーシック・定番 | 3 | 80件 | 260件 |
| ECブランド・D2C | 5 | 100件 | 300件 |
| セレクトショップ | 5 | 75件 | 250件 |
| ライフスタイル | 4 | 60件 | 160件 |
| 年齢層特化 | 4 | 40件 | 160件 |
| トレンド・個性派 | 4 | 40件 | 160件 |
| カジュアル | 4 | 40件 | 120件 |
| **合計** | **30ブランド** | **435件** | **1,410件** |

## 実行方法

### ローカル実行
```bash
# 通常実行
node scripts/sync-extended-mvp-brands.js

# 環境変数を設定して実行
PRIORITY_FILTER=1 SYNC_MODE=initial node scripts/sync-extended-mvp-brands.js
```

### GitHub Actions実行
- **定期実行**: 毎日午前2時と午後2時（JST）
- **手動実行**: Actions タブから `Extended MVP Brands Sync` を選択

### オプション
- `sync_mode`: 
  - `progressive`: 段階的増加（推奨）
  - `initial`: 初期同期（少なめ）
  - `full`: フル同期（最大）
- `priority_filter`: 1-7の優先度、または `all`
- `dry_run`: `true` でデータベース変更なしのテスト実行

## 注意事項

1. **楽天API制限**: 1秒あたり1リクエストの制限があるため、完全同期には約1-2時間かかります
2. **容量管理**: Supabase無料プランの場合、総商品数が90,000件を超えないよう自動管理されます
3. **段階的増加**: 商品数は週次で自動的に増加し、ユーザーエンゲージメントを観察しながら最適化されます

## 今後の拡張案

1. **ブランド追加候補**:
   - DHOLIC（韓国系）
   - Mila Owen（エレガント）
   - JEANASIS（カジュアル）
   - PAGEBOY（ストリート）

2. **機能拡張**:
   - ブランド別の人気度トラッキング
   - 季節別の商品優先度調整
   - ユーザー年齢層に応じた動的フィルタリング

---
最終更新: 2025年1月
